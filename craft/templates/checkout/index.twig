
{% extends "_layout" %}
{% includeCssFile "/checkout.css" %}
{% includeJsFile "/customer.js" %}

{% set cart = craft.commerce.getCart() %}

{% set shippingModel = cart.shippingAddress %}
{% set billingModel = cart.billingAddress %}

{% set addresses = craft.commerce.customer.addresses %}
{% set addressModel = '' %}
{% if addresses %}
  {% set addressModel = addresses[addresses | length - 1] %}
{% endif %}

{% set states = craft.commerce.statesArray["233"] %}

{% block main %}

  {% if cart.email == '' %}
    {% redirect "/checkout/user" 301 %}
  {% endif %}

  {% include "checkout/components/breadcrumb.twig" %}

  <form method="POST" id="address-info">

    {{ getCsrfInput() }}

    <input type="hidden" name="action" value="commerce/cart/updateCart">
    <input type="hidden" name="redirect" value="checkout/summary">
    <input type="hidden" name="shippingAddressId" value="new">

    <input type="hidden" name="shippingAddress[countryId]" value='233' />

    <section id="contact-details">

      <div class="lock">

        <p class="required required-disclaimer"><span>Required Field</span></p>

        <p class="acumin-medium-bold">Contact Details</p>

        <div class="required-field" data-required>
          <label for="firstName"><span>First Name</span></label>
          <input type="text"
                 name="shippingAddress[firstName]"
                 id="firstName"
                 validation="checkForLetter"
                 value="{{ shippingModel.firstName ?? addressModel.firstName ?? '' }}" />

          <div class="errors">
            <p class="required">First Name is a required Field</p>
            <p class="letters">First Name can only contain letters</p>
          </div>

        </div>

        <div class="required-field" data-required>
          <label for="lastName"><span>Last Name</span></label>
          <input type="text"
                 name="shippingAddress[lastName]"
                 id="lastName"
                 validation="checkForLetter"
                 value="{{ shippingModel.lastName ?? addressModel.lastName ?? '' }}" />

          <div class="errors">
            <p class="required">Last Name is a required Field</p>
          </div>

        </div>

        <div>
          <label for="phone">Phone Number</label>
          <input type="text"
                 name="shippingAddress[phone]"
                 id="phone"
                 value="{{ shippingModel.phone ?? addressModel.phone ?? '' }}" />
          <div class="errors"></div>

        </div>

      </div>

    </section>

    <section id="address">

      <div class="lock">

        <p class="acumin-medium-bold">Shipping Address</p>

        <div class="required-field" data-required>
          <label for="address"><span>Shipping Address 1</span></label>
          <input type="text"
                 name="shippingAddress[address1]"
                 id="address1"
                 value="{{ shippingModel.address1 ?? addressModel.address1 ?? '' }}" />

          <div class="errors">
            <p class="required">Shipping address is required</p>
          </div>

        </div>

        <div>
          <label for="address-two">Shipping Address 2</label>
          <input type="text"
                 name="shippingAddress[address2]"
                 id="address2"
                 value="{{ shippingModel.address2 ?? addressModel.address2 ?? '' }}" />

          <div class="errors"></div>
        </div>

        <div class="required-field" data-required>
          <label for="city"><span>Shipping City</span></label>
          <input type="text"
                 name="shippingAddress[city]"
                 id="city"
                 value="{{ shippingModel.city ?? addressModel.city ?? '' }}" />

          <div class="errors">
            <p class="required">City is required</p>
          </div>
        </div>

        <div class="required-field" data-required>
          <label for="zip"><span>Shipping Zip</span></label>
          <input type="text"
                 name="shippingAddress[zipCode]"
                 id="zipCode"
                 value="{{ shippingModel.zipCode ?? addressModel.zipCode ?? '' }}" />

          <div class="errors">
            <p class="required">City is required</p>
          </div>

        </div>

        <div class="required-field" data-required>

          <label for="state"><span>Shipping State</span></label>
          <select name="shippingAddress[stateId]" >
            <option disabled selected value> Please Choose </option>
            {% for state in craft.commerce.states %}
              <option value="{{ state.id }}">{{ state.name }}</option>
            {% endfor %}
          </select>

        </div>

      </div>

    </section>

    <section id="billing-address">

      <div class="lock">

        <p class="acumin-medium-bold">Billing Address</p>

        <div class="checkbox-field">
          <input type="checkbox" name="sameAddress" id="sameAddress" value="0" />
          <label for="sameAddress"><span>Same as Shipping Address</span></label>
        </div>

        <div class="required-field" data-required>
          <label for="address"><span>Billing Address 1</span></label>
          <input type="text"
                 name="billingAddress[address1]"
                 id="billingaddress1"
                 value="{{ billingModel.address1 ?? addressModel.address1 ?? '' }}" />

          <div class="errors">
            <p class="required">Address is required</p>
          </div>
        </div>

        <div>
          <label for="address-two">Billing Address 2</label>
          <input type="text"
                 name="billingAddress[address2]"
                 id="address2"
                 value="{{ billingModel.address2 ?? addressModel.address2 ?? '' }}" />
        </div>

        <div class="required-field" data-required>
          <label for="city"><span>Billing City</span></label>
          <input type="text"
                 name="billingAddress[city]"
                 id="city"
                 value="{{ billingModel.city ?? addressModel.city ?? '' }}" />

          <div class="errors">
            <p class="required">City is required</p>
          </div>
        </div>

        <div class="required-field" data-required>
          <label for="zip"><span>Billing Zip</span></label>
          <input type="text"
                 name="billingAddress[zipCode]"
                 id="zipCode"
                 value="{{ billingModel.zipCode ?? addressModel.zipCode ?? '' }}" />

          <div class="errors">
            <p class="required">Zip Code is required</p>
          </div>
        </div>

        <div class="required-field" data-required>

          <label for="state"><span>Billing State</span></label>
          <select name="billingAddress[stateId]">
            <option disabled selected value> Please Choose </option>
            {% for state in craft.commerce.states %}
              <option value="{{ state.id }}">{{ state.name }}</option>
            {% endfor %}
          </select>

        </div>

      </div>

    </section>

    <section class="action">

      <div class="lock">

        <div class="actions">
          <input type="submit" data-button="continue" value="Continue to Order Summary" class="call-to-action">
        </div>

      </div>

    </section>

  </form>

{% endblock %}
