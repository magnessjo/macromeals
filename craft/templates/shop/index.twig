
{% extends "_layout" %}
{% includeCssFile "/shop.css" %}
{% includeJsFile "/shopselection.js" %}

{% block main %}

  <section id="stage" class="slim-stage">
    <div class="image"></div>
    <div class="lock">
      <h1 class="nimbus-stage"><div>Meals</div></h1>
    </div>
  </section>

  {% include "components/notice.twig" %}

  <section>

    <div class="lock">

      <div class="meal-wrapper">

        <div class="meal-controller">

          <div>

            <div class="proteins">
              <p class="nimbus-tiny label">Types of Protein</p>

              <form id="checkbox" class="checkbox-options">

                {% for cat in craft.categories.group('protein') %}

                  <div class="checkbox-field">
                    <input type="checkbox" id="{{ cat }}" name="{{ cat }}" value="{{ cat }}">
                    <label for="{{ cat }}">{{ cat }}</label>
                  </div>

                {% endfor %}

              </form>

            </div>

          </div>

        </div>

        <div class="meal-list">

          {% for entry in craft.commerce.products %}

            {% if entry.productImage|length > 0 %}
              {% set image = entry.productImage[0].url %}
            {% else %}
              {% set image = '/images/products/placeholder.jpg' %}
            {% endif %}

            <div class="entry" data-protein="{% for cat in entry.protein %}{{ cat }}{% endfor %}">
              <div class="image">

                {% if entry.productPieChart|length > 0 %}
                  <div class="pie-chart">
                    <img src="{{ entry.productPieChart[0].url }}" alt="image of {{ entry.title }} macros" />
                  </div>
                {% endif %}

                <img src="{{ image }}" alt="image of {{ entry.title}} {{ entry.subTitle }}" />
              </div>
              <h2 class="nimbus-medium-bold">{{ entry.title}}<span>{{ entry.subTitle }}</span></h2>
              <div class="info">
                <div class="facts">
                  {% for row in entry.productMacros %}
                    {% if row.calories %}<p class="nimbus-tiny-bold"><span>Calories:</span> {{ row.calories }}</p>{% endif %}
                    {% if row.protein %}<p class="nimbus-tiny-bold"><span>Protein:</span> {{ row.protein }}</p>{% endif %}
                    {% if row.carbs %}<p class="nimbus-tiny-bold"><span>Carbs:</span> {{ row.carbs }}</p>{% endif %}
                    {% if row.fat %}<p class="nimbus-tiny-bold"><span>Fat:</span> {{ row.fat }}</p>{% endif %}
                  {% endfor %}
                </div>
              </div>
            </div>

          {% endfor %}

        </div>

      </div>

      </div>

    </div>

  </section>

{% endblock %}
